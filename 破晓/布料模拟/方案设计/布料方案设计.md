# 布料方案设计
## 破晓项目
### 动态骨骼使用策略 
- 展示界面，开启动态骨骼
- 游戏场景内，仅玩家自身开启动态骨骼，其余玩家全部蒙皮动画 **(视性能，可拓展至全队人员)**
- 中低端机不开启动态骨骼，所有场景使用蒙皮动画
- 同屏人数过多有性能压力(根据后续测试数据确定具体人数)情况下，关闭动态骨骼使用蒙皮动画
- 大幅度技能肢体动作下使用蒙皮动画
#### 蒙皮动画方案
**(可提供一键式，多个动画文件，自动生成布料动画插件)**
- 自动生成布料动画，动画质量可能不会太高，可能会出现部分穿插，穿模（可考虑手动修复）
## Magic Cloth2
- 从调用频率，算法本身出发进行性能分级，分出三级**A，B，C**

---
### 布料方案设计
**背景：** 目前项目内，目前的裙子并未添加附加骨骼，裙子部分权重直接刷给身体骨骼（大腿，小腿）
**目的：** 保证没有布料模拟情况下也能有现蒙皮方案差不多的表现效果
#### 只针对长裙处理布料效果
  经测试，对于长裙，裙子的附加骨骼父节点给小腿情况下，在不开启动态骨骼情况下，与原蒙皮方案对比也能有差不多的表现效果（膝盖以上的中裙效果不佳）
- 优势：展示界面，游戏场景下都可随策略开启布料效果
- 劣势：需修改长裙角色蒙皮添加裙子的附加骨骼，对于裙子来说只有长裙类型才会有布料效果

#### 布料模拟
  使用布料模拟方案(指非动态骨骼方案)
  - 优势：目前美术绑定蒙皮方案不变，所有裙子均可使用，表现效果会更加真实
  - 劣势：基于性能和稳定表现考量（真实物理解算易穿插性较高），只能在展示界面中使用，其他所有场景下都不开启

#### ~~两套蒙皮模型文件~~
  不改变目前项目内蒙皮方式，增加一套对于裙子设有附加骨骼的模型文件，在使用策略下进行模型替换
- 优势：展示界面，游戏场景下都可随策略开启布料效果
- 劣势：增加部分美术工作内容，随策略如果动态切换频繁会出现性能热点，包体会略有增加
---
### 最终方案设计
  首先对于希望布料有动态效果，无论是动态骨骼还是布料模拟方案都需要在模型上做一些约束，例如
- 袖口，裙摆底部等部位，不使用传统模型制作方式将其封闭，采用开放的面
![avater](/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/%E5%B0%81%E9%97%AD%E7%9A%84%E9%9D%A2.png)
- 布料部分要有开口，不可包成桶装
- 布料与身体之间保持一定距离
等等...

#### 对于期望在游戏场景中使用
**背景：** 目前项目内，目前的裙子并未添加附加骨骼，裙子部分权重直接刷给身体骨骼（大腿，小腿）
**目的：** 保证没有布料模拟情况下也能有现蒙皮方案差不多的表现效果

在游戏场景中使用可能会产生以下几点问题
- 因场景
- 游戏场景内的可使用的动作较为复杂，易出现